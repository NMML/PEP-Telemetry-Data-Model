<?xml version = '1.0' encoding = 'UTF-8'?>
<StoredProcedureOraclev10g class="oracle.dbtools.crest.model.design.storage.oracle.v10g.StoredProcedureOraclev10g" name="UPDATESTATUS" id="C1159702-8A2F-1B67-29F8-C8410700705D" directorySegmentName="seg_0">
<sourceConnName>test_peptel</sourceConnName>
<sourceObjSchema>PEPTEL</sourceObjSchema>
<sourceObjName>UPDATESTATUS</sourceObjName>
<createdBy>Josh.London@afsc.noaa.gov</createdBy>
<createdTime>2013-03-27 17:10:18 UTC</createdTime>
<ownerDesignName>pep_telemetry</ownerDesignName>
<owner>7FA7C775-8AA2-5E8C-D91A-A81EC4048787</owner>
<source>CREATE OR REPLACE PROCEDURE PEPTEL.UPDATESTATUS&lt;br/&gt;authid current_user&lt;br/&gt;IS&lt;br/&gt;  C NUMBER;&lt;br/&gt;BEGIN&lt;br/&gt;  execute immediate &apos;set role ALL&apos;;&lt;br/&gt;  SELECT COUNT(*) INTO C&lt;br/&gt;  FROM USER_SEQUENCES&lt;br/&gt;  WHERE SEQUENCE_NAME = &apos;STATUS_SEQ&apos;;&lt;br/&gt;&lt;br/&gt;  IF (C = 0) THEN&lt;br/&gt;    EXECUTE IMMEDIATE &apos;CREATE SEQUENCE STATUS_SEQ START WITH 1 INCREMENT BY 1 MINVALUE 0&apos;;&lt;br/&gt;    ELSE&lt;br/&gt;    EXECUTE IMMEDIATE &apos;DROP SEQUENCE STATUS_SEQ&apos;; &lt;br/&gt;    EXECUTE IMMEDIATE &apos;CREATE SEQUENCE STATUS_SEQ START WITH 1 INCREMENT BY 1 MINVALUE 0&apos;;&lt;br/&gt;  END IF;&lt;br/&gt;  EXECUTE IMMEDIATE &apos;TRUNCATE TABLE PEPTEL.STATUS&apos;;&lt;br/&gt;  commit;&lt;br/&gt;  EXECUTE IMMEDIATE &apos;&lt;br/&gt;  INSERT INTO PEPTEL.STATUS&lt;br/&gt;    SELECT &lt;br/&gt;    NULL AS STATUSID,&lt;br/&gt;    PEPDEPLOYMENTS.DEPLOYID,&lt;br/&gt;    PEPCAPTUREDATA.SPENO,&lt;br/&gt;    PEPTAGINFO.PTT,&lt;br/&gt;    PEPCAPTUREDATA.PROJECTID,&lt;br/&gt;    PEPCAPTUREDATA.SPECIES,&lt;br/&gt;    PEPDEPLOYMENTS.DEPLOYDATE,&lt;br/&gt;    PEPTAGINFO.TAGTYPE,&lt;br/&gt;    PEPCAPTUREDATA.AGE,&lt;br/&gt;    PEPCAPTUREDATA.SEX,&lt;br/&gt;    TO_DATE(EXTSTATUS.RTC,&apos;&apos;YYYY-MM-DD HH24:MI:SS&apos;&apos;) STATUSDATETIME,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;DEPTHSENSOR&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;INSTR&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;SW&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;RECEIVED&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;TIMEOFFSET&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;LOCATIONQUALITY&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;LATITUDE&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;LONGITUDE&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;TYPE&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;HAULEDOUT&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;BROKENTHERMISTOR&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;BROKENLINK&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;TRANSMITS&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;BATTVOLTAGE&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;TRANSMITVOLTAGE&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;TRANSMITCURRENT&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;TEMPERATURE&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;DEPTH&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;MAXDEPTH&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;ZERODEPTHOFFSET&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;LIGHTLEVEL&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;NODAWNDUSK&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;RELEASETYPE&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;RELEASETIME&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;INITIALLYBROKEN&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;BURNMINUTES&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;RELEASEDEPTH&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;FASTGPSPOWER&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;TWICPOWER&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;POWERLIMIT&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;MINWETDRY&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;MAXWETDRY&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;WETDRYTHRESHOLD&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;STATUSWORD&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;TRANSMITPOWER&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;RESETS&quot;&lt;br/&gt;  FROM EXTSTATUS&lt;br/&gt;  LEFT JOIN PEPDEPLOYMENTS&lt;br/&gt;  ON PEPDEPLOYMENTS.DEPLOYID = EXTSTATUS.DEPLOYID&lt;br/&gt;  LEFT JOIN PEPCAPTUREDATA&lt;br/&gt;  ON PEPDEPLOYMENTS.SPENO = PEPCAPTUREDATA.SPENO&lt;br/&gt;  LEFT JOIN PEPTAGINFO&lt;br/&gt;  ON PEPDEPLOYMENTS.SERIALNUM = PEPTAGINFO.SERIALNUM&apos;;&lt;br/&gt;  COMMIT;&lt;br/&gt;END;</source>
<body>CREATE OR REPLACE PROCEDURE PEPTEL.UPDATESTATUS&lt;br/&gt;authid current_user&lt;br/&gt;IS&lt;br/&gt;  C NUMBER;&lt;br/&gt;BEGIN&lt;br/&gt;  execute immediate &apos;set role ALL&apos;;&lt;br/&gt;  SELECT COUNT(*) INTO C&lt;br/&gt;  FROM USER_SEQUENCES&lt;br/&gt;  WHERE SEQUENCE_NAME = &apos;STATUS_SEQ&apos;;&lt;br/&gt;&lt;br/&gt;  IF (C = 0) THEN&lt;br/&gt;    EXECUTE IMMEDIATE &apos;CREATE SEQUENCE STATUS_SEQ START WITH 1 INCREMENT BY 1 MINVALUE 0&apos;;&lt;br/&gt;    ELSE&lt;br/&gt;    EXECUTE IMMEDIATE &apos;DROP SEQUENCE STATUS_SEQ&apos;; &lt;br/&gt;    EXECUTE IMMEDIATE &apos;CREATE SEQUENCE STATUS_SEQ START WITH 1 INCREMENT BY 1 MINVALUE 0&apos;;&lt;br/&gt;  END IF;&lt;br/&gt;  EXECUTE IMMEDIATE &apos;TRUNCATE TABLE PEPTEL.STATUS&apos;;&lt;br/&gt;  commit;&lt;br/&gt;  EXECUTE IMMEDIATE &apos;&lt;br/&gt;  INSERT INTO PEPTEL.STATUS&lt;br/&gt;    SELECT &lt;br/&gt;    NULL AS STATUSID,&lt;br/&gt;    PEPDEPLOYMENTS.DEPLOYID,&lt;br/&gt;    PEPCAPTUREDATA.SPENO,&lt;br/&gt;    PEPTAGINFO.PTT,&lt;br/&gt;    PEPCAPTUREDATA.PROJECTID,&lt;br/&gt;    PEPCAPTUREDATA.SPECIES,&lt;br/&gt;    PEPDEPLOYMENTS.DEPLOYDATE,&lt;br/&gt;    PEPTAGINFO.TAGTYPE,&lt;br/&gt;    PEPCAPTUREDATA.AGE,&lt;br/&gt;    PEPCAPTUREDATA.SEX,&lt;br/&gt;    TO_DATE(EXTSTATUS.RTC,&apos;&apos;YYYY-MM-DD HH24:MI:SS&apos;&apos;) STATUSDATETIME,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;DEPTHSENSOR&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;INSTR&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;SW&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;RECEIVED&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;TIMEOFFSET&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;LOCATIONQUALITY&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;LATITUDE&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;LONGITUDE&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;TYPE&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;HAULEDOUT&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;BROKENTHERMISTOR&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;BROKENLINK&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;TRANSMITS&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;BATTVOLTAGE&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;TRANSMITVOLTAGE&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;TRANSMITCURRENT&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;TEMPERATURE&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;DEPTH&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;MAXDEPTH&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;ZERODEPTHOFFSET&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;LIGHTLEVEL&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;NODAWNDUSK&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;RELEASETYPE&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;RELEASETIME&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;INITIALLYBROKEN&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;BURNMINUTES&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;RELEASEDEPTH&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;FASTGPSPOWER&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;TWICPOWER&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;POWERLIMIT&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;MINWETDRY&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;MAXWETDRY&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;WETDRYTHRESHOLD&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;STATUSWORD&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;TRANSMITPOWER&quot;,&lt;br/&gt;    &quot;EXTSTATUS&quot;.&quot;RESETS&quot;&lt;br/&gt;  FROM EXTSTATUS&lt;br/&gt;  LEFT JOIN PEPDEPLOYMENTS&lt;br/&gt;  ON PEPDEPLOYMENTS.DEPLOYID = EXTSTATUS.DEPLOYID&lt;br/&gt;  LEFT JOIN PEPCAPTUREDATA&lt;br/&gt;  ON PEPDEPLOYMENTS.SPENO = PEPCAPTUREDATA.SPENO&lt;br/&gt;  LEFT JOIN PEPTAGINFO&lt;br/&gt;  ON PEPDEPLOYMENTS.SERIALNUM = PEPTAGINFO.SERIALNUM&apos;;&lt;br/&gt;  COMMIT;&lt;br/&gt;END;</body>
</StoredProcedureOraclev10g>